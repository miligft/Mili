<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
  <title>Ú¯Ø±Ø¯ÙˆÙ†Ù‡ Ø´Ø§Ù†Ø³ Ø·Ù„Ø§ÛŒÛŒ</title>
  <style>
    :root{--gold1:#d4af37;--gold2:#b8860b;--bg:#0b0b0b;}
    *{box-sizing:border-box;font-family: 'Vazirmatn', Tahoma, Arial, sans-serif}
    body{margin:0;background:#0f0f0f;color:#fff;display:flex;justify-content:center;padding:10px}
    .container{width:100%;max-width:600px;margin:auto}
    .card{background:rgba(255,255,255,0.04);padding:14px;border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,0.6);}
    h1{text-align:center;font-size:20px;color:var(--gold1);margin:0 0 6px}
    p{text-align:center;color:#ccc;margin:0 0 14px}

    /* wheel */
    .wheel-wrap{position:relative;width:100%;max-width:100%;margin:auto}
    #wheelCanvas{width:100% !important;height:auto !important;display:block;border-radius:50%}
    .pointer{position:absolute;top:-18px;left:50%;transform:translateX(-50%);}
    .pointer:after{content:'';border-left:14px solid transparent;border-right:14px solid transparent;border-bottom:22px solid var(--gold2);}

    /* buttons */
    .btn{width:100%;padding:12px;border-radius:12px;border:none;background:linear-gradient(180deg,var(--gold1),var(--gold2));color:#111;font-weight:700;margin-top:10px;cursor:pointer}
    .status{text-align:center;color:#ffdca8;margin-top:8px;font-size:14px}

    /* modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.65);display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;transition:0.2s}
    .modal.open{opacity:1;visibility:visible}
    .modal-box{background:#111;padding:18px;border-radius:12px;max-width:90%;width:360px;text-align:center}
    .modal-box h2{color:var(--gold1);margin:0 0 10px}
    .modal-box p{margin:0 0 15px;color:#ddd;white-space:pre-wrap;}
    .close-btn{background:#333;color:#eee;padding:10px 16px;border:none;border-radius:10px;cursor:pointer}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>Ú¯Ø±Ø¯ÙˆÙ†Ù‡ Ø´Ø§Ù†Ø³ Ø·Ù„Ø§ÛŒÛŒ</h1>
      <p>Ú¯Ø±Ø¯ÙˆÙ†Ù‡ Ø±Ùˆ Ø¨Ú†Ø±Ø®ÙˆÙ† Ùˆ Ø´Ø§Ù†Ø³ Ø®ÙˆØ¯ØªÙˆ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†! </p>

      <div class="wheel-wrap">
        <div class="pointer"></div>
        <canvas id="wheelCanvas"></canvas>
      </div>

      <button id="spinBtn" class="btn">Ø´Ø±ÙˆØ¹ Ú†Ø±Ø®Ø´</button>
      <div id="statusArea" class="status">ÛŒÚ©Ø¨Ø§Ø± Ø´Ø§Ù†Ø³ Ú†Ø±Ø®Ø´ Ú¯Ø±Ø¯ÙˆÙ†Ù‡</div>

    </div>
  </div>

  <!-- modal -->
  <div id="modal" class="modal">
    <div class="modal-box">
      <h2 id="modalTitle"></h2>
      <p id="modalText"></p>
      <button id="modalClose" class="close-btn">Ø¨Ø§Ø´Ù‡</button>
    </div>
  </div>

<script>
const sectors = [
  'Û±Û°Û°,Û°Û°Û° Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…',
  'Û±Û°,Û°Û°Û° Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…',
  'Û³ Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…',
  'Ûµ Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…',
  'Û±Û° Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…',
  'Û±Û°Û° Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…'
];

const canvas = document.getElementById('wheelCanvas');
const ctx = canvas.getContext('2d');

function resizeCanvas(){
  const size = canvas.parentElement.clientWidth;
  canvas.width = size;
  canvas.height = size;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

function drawWheel(rot=0){
  const w = canvas.width;
  const cx = w/2, cy = w/2;
  const r = w/2 - 10;
  ctx.clearRect(0,0,w,w);
  ctx.save();
  ctx.translate(cx,cy);
  ctx.rotate(rot*Math.PI/180);
  const arc = 360/sectors.length;

  for(let i=0;i<sectors.length;i++){
    const start = arc*i*Math.PI/180;
    const end = arc*(i+1)*Math.PI/180;
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.arc(0,0,r,start,end);
    ctx.fillStyle = i%2===0? '#d4af37':'#b8860b';
    ctx.fill();

    ctx.save();
    ctx.rotate(start + (end-start)/2);
    ctx.translate(r*0.55,0);
    ctx.rotate(Math.PI/2);
    ctx.fillStyle='#000';
    ctx.font='bold '+ (w*0.04) +'px Vazirmatn';
    ctx.textAlign='center';
    ctx.fillText(sectors[i],0,0);
    ctx.restore();
  }

  ctx.restore();
}

drawWheel(0);

const spinBtn = document.getElementById('spinBtn');
const statusArea = document.getElementById('statusArea');
const modal = document.getElementById('modal');
const modalTitle = document.getElementById('modalTitle');
const modalText = document.getElementById('modalText');
const modalClose = document.getElementById('modalClose');

function ease(t){ return 1 - Math.pow(1-t,3); }

spinBtn.onclick = ()=>{
  const targetIndex = sectors.indexOf('Û±Û°Û° Ù…ÛŒÙ„ÛŒâ€ŒÚ¯Ø±Ù…');
  const arc = 360/sectors.length;
  const final = 360*6 + (270 - (targetIndex*arc + arc/2));

  const startTime = performance.now();
  const duration = 4500;

  function animate(now){
    const t = Math.min(1,(now-startTime)/duration);
    drawWheel(final * ease(t));
    if(t<1) requestAnimationFrame(animate);
    else finish();
  }
  requestAnimationFrame(animate);

  function finish(){
    statusArea.textContent = 'ðŸŽ‰ Ú†Ø±Ø®Ø´ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯! Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¨Ú†Ø±Ø®Ø§Ù†ÛŒØŒ Ø§Ù…Ø§ Ø¬Ø§ÛŒØ²Ù‡ Ù‚Ø¨Ù„ÛŒâ€ŒØ§Øª Ù‡Ù†ÙˆØ² Ù…Ø­ÙÙˆØ¸ Ø§Ø³ØªØŒ Ø²ÛŒØ±Ø§ Ù‡Ø± Ú©Ø§Ø±Ø¨Ø± ÙÙ‚Ø· ÛŒÚ© Ø´Ø§Ù†Ø³ ÙˆØ§Ù‚Ø¹ÛŒ Ø¯Ø§Ø±Ø¯! âœ¨';
    const prize = sectors[targetIndex];

    const signupLink = 'https://milli.gold/app/sign-up?referralCode=milli-oe3ri';
    modalTitle.textContent = 'ØªØ¨Ø±ÛŒÚ©!';
    modalText.innerHTML = `Ø´Ù…Ø§ ${prize} Ø¨Ø±Ù†Ø¯Ù‡ Ø´Ø¯ÛŒØ¯! Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù‡Ø¯ÛŒÙ‡ Ø§Ø² Ù„ÛŒÙ†Ú© Ø²ÛŒØ± Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ù†ÛŒØ¯.<br><br>
    <a href="${signupLink}" target="_blank" id="signupLink" style="color: var(--gold1); text-decoration: underline;">
    https://milli.gold/app/sign-up?referralCode=milli-oe3ri
    </a><br><br>
    ØªÙˆØ¬Ù‡: ØªÙ†Ù‡Ø§ Ø¨Ø§ Ø´Ù…Ø§Ø±Ù‡ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø«Ø¨Øªâ€ŒØ´Ø¯Ù‡ Ø¨Ù‡ Ù†Ø§Ù… Ø®ÙˆØ¯ØªØ§Ù† Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ú©Ø±Ø¯Ù‡ Ùˆ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø±Ø§ Ú©Ø§Ù…Ù„ Ú©Ù†ÛŒØ¯.`;

    modal.classList.add('open');

    // Ø±ÛŒØ¯Ø§ÛŒØ±Ú©Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ø² 50 Ø«Ø§Ù†ÛŒÙ‡
    const redirectTimeout = setTimeout(()=>{ window.location.href = signupLink; }, 35000);

    // Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ø±ÙˆÛŒ Ù„ÛŒÙ†Ú© Ú©Ù„ÛŒÚ© Ú©Ù†Ø¯ØŒ ØªØ§ÛŒÙ…Ø± Ù„ØºÙˆ Ø´ÙˆØ¯
    document.getElementById('signupLink').addEventListener('click', ()=>{
      clearTimeout(redirectTimeout);
    });
  }
};

modalClose.onclick = ()=>{ modal.classList.remove('open'); };
</script>
</body>
</html>
